"use strict";(self.webpackChunkgoit_react_hw_08_phonebook_draft_ii=self.webpackChunkgoit_react_hw_08_phonebook_draft_ii||[]).push([[937],{937:function(n,e,t){t.r(e),t.d(e,{ContactsView:function(){return H}});var r,i,a,c,o,s,d,u,l,m=t(885),h=t(2791),p=t(9434),f=t(3937),b=function(n){return n.contacts.items},x=function(n){return n.contacts.isLoading},g=function(n){return n.contacts.error},j=function(n){return n.contacts.filter},Z=((0,t(6382).PH)("contacts/findContact"),t(5502)),v=t(4476),w=t(1413),C=t(5118),y=t(5984),S=t(168),k=t(6444),P=k.ZP.form(r||(r=(0,S.Z)([""]))),_=k.ZP.label(i||(i=(0,S.Z)(["\n  display: block;\n  width: 100%;\n  padding: ",";\n"])),(function(n){return"".concat(n.theme.space[1],"px")})),F=k.ZP.input(a||(a=(0,S.Z)(["\n  width: 75%;\n  padding: ",";\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return"".concat(n.theme.space[1],"px")}),(function(n){return"".concat(n.theme.space[2],"px")})),A=t(8747),L=t(3329),z=function(n){var e,t,r=n.onFormSubmit,i=n.isLoading,a=(0,y.x0)(),c=(0,y.x0)(),o=(0,C.cI)({defaultValues:{name:"",number:""}}),s=o.register,d=o.handleSubmit,u=o.reset,l=o.formState,m=o.formState,p=m.errors,f=m.isSubmitSuccessful;return(0,h.useEffect)((function(){l.isSubmitSuccessful&&u({name:"",number:""})}),[l,f,u]),(0,L.jsx)(v.x,{display:"block",p:2,mb:4,bg:"bgComponent",width:"50%",borderRadius:"normal",boxShadow:"basic",children:(0,L.jsxs)(P,{onSubmit:d((function(n){r(n)})),children:[(0,L.jsx)(_,{htmlFor:a,children:"Name"}),(0,L.jsx)(F,(0,w.Z)((0,w.Z)({id:a,type:"text",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan"},s("name",{required:!0,pattern:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/i})),{},{"aria-invalid":p.name?"true":"false"})),"required"===(null===(e=p.name)||void 0===e?void 0:e.type)&&(0,L.jsx)("p",{role:"alert",children:"Name is required"}),(0,L.jsx)(_,{htmlFor:c,children:"Number"}),(0,L.jsx)(F,(0,w.Z)((0,w.Z)({id:c,type:"tel",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +"},s("number",{required:"Phone number is required",pattern:/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/i})),{},{"aria-invalid":p.number?"true":"false"})),p.number&&(0,L.jsx)("p",{role:"alert",children:null===(t=p.number)||void 0===t?void 0:t.message}),(0,L.jsx)(A.z,{type:"submit",disabled:i,children:"Add contact"})]})})},q=k.ZP.label(c||(c=(0,S.Z)(["\n  display: block;\n  width: 100%;\n  padding: ",";\n"])),(function(n){return"".concat(n.theme.space[1],"px")})),I=k.ZP.input(o||(o=(0,S.Z)(["\n  width: 75%;\n  padding: ",";\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return"".concat(n.theme.space[1],"px")}),(function(n){return"".concat(n.theme.space[2],"px")})),N=function(n){var e=n.onChange,t=(0,y.x0)(),r=(0,C.cI)(),i=r.register,a=r.watch;return e(a(["filter"])),(0,h.useEffect)((function(){var n=a((function(n,e){var t=e.name,r=e.type;return console.log(n,t,r)}));return function(){return n.unsubscribe()}}),[a]),(0,L.jsxs)(v.x,{display:"block",p:2,mb:3,bg:"bgComponent",width:"50%",borderRadius:"normal",boxShadow:"basic",children:[(0,L.jsx)(q,{htmlFor:t,children:"Find contacts by name"}),(0,L.jsx)(I,(0,w.Z)({id:t,type:"text"},i("filter")))]})},E=k.ZP.ul(s||(s=(0,S.Z)([""]))),R=k.ZP.li(d||(d=(0,S.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 0.5fr;\n  padding: ",";\n  align-items: center;\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return"".concat(n.theme.space[0],"px")}),(function(n){return"".concat(n.theme.space[1],"px")})),D=k.ZP.p(u||(u=(0,S.Z)(["\n  margin-right: ",";\n"])),(function(n){return"".concat(n.theme.space[1],"px")})),M=k.ZP.p(l||(l=(0,S.Z)([""]))),V=function(n){var e=n.id,t=n.name,r=n.number,i=(0,p.I0)(),a=(0,p.v9)(x);return(0,L.jsxs)(R,{children:[(0,L.jsx)(D,{children:t+":"}),(0,L.jsx)(M,{children:r}),(0,L.jsx)(A.z,{type:"button",onClick:function(){return i(f.deleteContact(e))},disabled:a,children:a?"Deleting...":"Delete"})]})},B=function(n){var e=n.list,t=(0,p.v9)(b);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("h2",{children:"Contacts list"}),(0,L.jsx)("p",{children:t&&t.length>0&&"Total count ".concat(t.length)}),(0,L.jsx)(v.x,{display:"block",p:2,bg:"bgComponent",width:"50%",borderRadius:"normal",boxShadow:"basic",children:(0,L.jsx)(E,{children:e.map((function(n){return(0,L.jsx)(V,(0,w.Z)({},n),n.id)})).sort((function(n,e){return n.props.name.localeCompare(e.props.name)}))})})]})},H=function(){var n=(0,p.I0)(),e=(0,p.v9)(x),t=(0,p.v9)(g),r=(0,p.v9)(b),i=(0,p.v9)(j);(0,h.useEffect)((function(){n(f.fetchContacts())}),[n]);var a=(0,h.useMemo)((function(){return i?r.filter((function(n){return n.name.toLowerCase().trim().includes(i.toLowerCase().trim())})):r}),[i,r]);return(0,L.jsxs)(v.x,{width:1,p:4,as:"main",children:[t&&(0,L.jsx)("p",{children:t}),(0,L.jsx)("h2",{children:"Add contact"}),(0,L.jsx)(z,{onFormSubmit:function(e){var t=e.name,i=e.number;r.some((function(n){return n.name.toLowerCase().trim()===t.toLowerCase().trim()}))?alert("".concat(t," is already in contacts")):n(f.addContact({id:(0,y.x0)(),name:t,number:i}))}}),(0,L.jsx)("h2",{children:"Find contact"}),(0,L.jsx)(N,{onChange:function(e){var t=(0,m.Z)(e,1)[0];n(Z.findContact(t))}}),e&&(0,L.jsx)("p",{children:"Loading contacts..."}),r&&r.length>0&&(0,L.jsx)(B,{list:a})]})}}}]);
//# sourceMappingURL=937.3803a6c4.chunk.js.map