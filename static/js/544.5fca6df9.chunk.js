"use strict";(self.webpackChunkgoit_react_hw_08_phonebook_draft_ii=self.webpackChunkgoit_react_hw_08_phonebook_draft_ii||[]).push([[544],{7544:function(n,t,e){e.r(t),e.d(t,{ContactsView:function(){return J}});var r,i,a,c,o,s,d,u,l,m,h=e(885),p=e(2791),f=e(9434),b=e(3937),x=function(n){return n.contacts.items},g=function(n){return n.contacts.isLoading},j=function(n){return n.contacts.error},Z=function(n){return n.contacts.filter},w=((0,e(6382).PH)("contacts/findContact"),e(4731)),C=e(4476),v=e(1413),y=e(5118),P=e(5984),S=e(168),k=e(6444),_=k.ZP.form(r||(r=(0,S.Z)([""]))),F=k.ZP.label(i||(i=(0,S.Z)(["\n  display: block;\n  width: 100%;\n  padding: ",";\n"])),(function(n){return"".concat(n.theme.space[1],"px")})),A=k.ZP.input(a||(a=(0,S.Z)(["\n  width: 75%;\n  padding: ",";\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return"".concat(n.theme.space[1],"px")}),(function(n){return"".concat(n.theme.space[2],"px")})),L=e(8747),z=e(3329),q=function(n){var t,e,r=n.onFormSubmit,i=n.isLoading,a=(0,P.x0)(),c=(0,P.x0)(),o=(0,y.cI)({defaultValues:{name:"",number:""}}),s=o.register,d=o.handleSubmit,u=o.reset,l=o.formState,m=o.formState,h=m.errors,f=m.isSubmitSuccessful;return(0,p.useEffect)((function(){l.isSubmitSuccessful&&u({name:"",number:""})}),[l,f,u]),(0,z.jsx)(C.x,{display:"block",p:2,mb:4,bg:"bgComponent",width:"95%",borderRadius:"normal",boxShadow:"basic",children:(0,z.jsxs)(_,{onSubmit:d((function(n){r(n)})),children:[(0,z.jsx)(F,{htmlFor:a,children:"Name"}),(0,z.jsx)(A,(0,v.Z)((0,v.Z)({id:a,type:"text",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan"},s("name",{required:!0,pattern:/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/i})),{},{"aria-invalid":h.name?"true":"false"})),"required"===(null===(t=h.name)||void 0===t?void 0:t.type)&&(0,z.jsx)("p",{role:"alert",children:"Name is required"}),(0,z.jsx)(F,{htmlFor:c,children:"Number"}),(0,z.jsx)(A,(0,v.Z)((0,v.Z)({id:c,type:"tel",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +"},s("number",{required:"Phone number is required",pattern:/\+?\d{1,4}?[-.\s]?\(?\d{1,3}?\)?[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9}/i})),{},{"aria-invalid":h.number?"true":"false"})),h.number&&(0,z.jsx)("p",{role:"alert",children:null===(e=h.number)||void 0===e?void 0:e.message}),(0,z.jsx)(L.z,{type:"submit",disabled:i,children:"Add contact"})]})})},I=k.ZP.label(c||(c=(0,S.Z)(["\n  display: block;\n  width: 100%;\n  padding: ",";\n"])),(function(n){return"".concat(n.theme.space[1],"px")})),N=k.ZP.input(o||(o=(0,S.Z)(["\n  width: 75%;\n  padding: ",";\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return"".concat(n.theme.space[1],"px")}),(function(n){return"".concat(n.theme.space[2],"px")})),E=function(n){var t=n.onChange,e=(0,P.x0)(),r=(0,y.cI)(),i=r.register,a=r.watch;return t(a(["filter"])),(0,p.useEffect)((function(){var n=a((function(n,t){var e=t.name,r=t.type;return console.log(n,e,r)}));return function(){return n.unsubscribe()}}),[a]),(0,z.jsxs)(C.x,{display:"block",p:2,mb:3,bg:"bgComponent",width:"95%",borderRadius:"normal",boxShadow:"basic",children:[(0,z.jsx)(I,{htmlFor:e,children:"Find contacts by name"}),(0,z.jsx)(N,(0,v.Z)({id:e,type:"text"},i("filter")))]})},R=k.ZP.ul(s||(s=(0,S.Z)([""]))),T=k.ZP.li(d||(d=(0,S.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 0.5fr;\n  padding: ",";\n  align-items: center;\n  &:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),(function(n){return"".concat(n.theme.space[0],"px")}),(function(n){return"".concat(n.theme.space[1],"px")})),M=k.ZP.p(u||(u=(0,S.Z)(["\n  margin-right: ",";\n"])),(function(n){return"".concat(n.theme.space[1],"px")})),V=k.ZP.p(l||(l=(0,S.Z)([""]))),B=function(n){var t=n.id,e=n.name,r=n.number,i=(0,f.I0)();return(0,z.jsxs)(T,{children:[(0,z.jsx)(M,{children:e+":"}),(0,z.jsx)(V,{children:r}),(0,z.jsx)(L.z,{type:"button",onClick:function(){return i(b.deleteContact(t))},children:"Delete"})]})},D=function(n){var t=n.list,e=(0,f.v9)(x);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("h2",{children:"Contacts list"}),(0,z.jsx)("p",{children:e&&e.length>0&&"Total count ".concat(e.length)}),(0,z.jsx)(C.x,{display:"block",p:2,bg:"bgComponent",width:1,borderRadius:"normal",boxShadow:"basic",children:(0,z.jsx)(R,{children:t.map((function(n){return(0,z.jsx)(B,(0,v.Z)({},n),n.id)})).sort((function(n,t){return n.props.name.localeCompare(t.props.name)}))})})]})},H=k.ZP.h2(m||(m=(0,S.Z)(["\n  margin-bottom: ",";\n"])),(function(n){return"".concat(n.theme.space[3],"px")})),J=function(){var n=(0,f.I0)(),t=(0,f.v9)(g),e=(0,f.v9)(j),r=(0,f.v9)(x),i=(0,f.v9)(Z);(0,p.useEffect)((function(){n(b.fetchContacts())}),[n]);var a=(0,p.useMemo)((function(){return i?r.filter((function(n){return n.name.toLowerCase().trim().includes(i.toLowerCase().trim())})):r}),[i,r]);return(0,z.jsxs)(C.x,{width:1,p:4,as:"main",paddingTop:75,display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,z.jsxs)(C.x,{width:1,children:[e&&(0,z.jsx)("p",{children:e}),(0,z.jsx)(H,{children:"Add contact"}),(0,z.jsx)(q,{onFormSubmit:function(t){var e=t.name,i=t.number;r.some((function(n){return n.name.toLowerCase().trim()===e.toLowerCase().trim()}))?alert("".concat(e," is already in contacts")):n(b.addContact({id:(0,P.x0)(),name:e,number:i}))}}),(0,z.jsx)("h2",{children:"Find contact"}),(0,z.jsx)(E,{onChange:function(t){var e=(0,h.Z)(t,1)[0];n(w.findContact(e))}})]}),(0,z.jsxs)(C.x,{width:1,children:[t&&(0,z.jsx)("p",{children:"Loading contacts..."}),r&&r.length>0&&(0,z.jsx)(D,{list:a})]})]})}}}]);
//# sourceMappingURL=544.5fca6df9.chunk.js.map